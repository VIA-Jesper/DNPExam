@page "/create"
@using TestWeb.Data

@inject ApiService ApiService

<h3>Create</h3>
<hr/>
<br/>
<div class="col-4 offset-4">
    
    <!-- Inputs -->
    <div class="form-group">
        <label for="input1">Input1:</label>
        <input type="text" class="form-control" id="input1" @bind="input1">
    </div>

    <div class="form-group">
        <label for="input2">Input2:</label>
        <input type="text" class="form-control" id="input2" @bind="input2">
    </div>

    <div class="form-group">
        <label for="input3">Input3:</label>
        <input type="text" class="form-control" id="input3" @bind="input3">
    </div>

    <div class="form-group mt-2">
        <button class="btn btn-primary" @onclick="Create">Create</button>
        
    </div>
    
    <!-- Buttons -->

    <div class="form-group">
        @if (errorMessage.Length > 0)
        {
            <p class="alert-danger font-weight-bold">@errorMessage</p>
        }
        else if (successMessage.Length > 0)
        {
            <p class="alert-success font-weight-bold">@successMessage</p>
        }

    </div>
</div>





@code {

    private string input1 = "";
    private string input2 = "";
    private string input3 = "";

    private string errorMessage = "";
    private string successMessage = "";
    

    private async void Create()
    {
        try
        {
            var result = ""; // api here
            if (result != null)
            {
                ClearInput();
                successMessage = "Successfully created";
            }
        }
        catch (Exception e)
        {
            errorMessage = e.Message;
        }
        

        StateHasChanged();
    }

    private void ClearInput()
    {
        input1 = "";
        input2 = "";
        input3 = "";
        errorMessage = "";
        StateHasChanged();
    }


}
